From 6d6cd9463f97ab8e021798bd313655fad5802179 Mon Sep 17 00:00:00 2001
From: Zygmunt Krynicki <zygmunt.krynicki@huawei.com>
Date: Thu, 28 Jan 2021 14:25:09 +0100
Subject: [PATCH] Add makefile based on zmk

The makefile defines ActsDacTest.bin

Signed-off-by: Zygmunt Krynicki <zygmunt.krynicki@huawei.com>
---
 GNUmakefile | 37 +++++++++++++++++++++++++++++++++++++
 1 file changed, 37 insertions(+)
 create mode 100644 GNUmakefile

diff --git a/GNUmakefile b/GNUmakefile
new file mode 100644
index 0000000..6a7a2d8
--- /dev/null
+++ b/GNUmakefile
@@ -0,0 +1,37 @@
+# SPDX-License-Identifier: Apache-2.0
+#
+# Copyright 2021 Huawei Inc.
+#
+# Licensed under the Apache License, Version 2.0 (the "License");
+# you may not use this file except in compliance with the License.
+# You may obtain a copy of the License at
+#
+#     http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+
+include z.mk
+
+Project.Name=ohos-xts-acts
+Project.Version=1
+
+$(eval $(call ZMK.Import,Configure))
+
+ActsDacTest.bin: CPPFLAGS += -iquote $(ZMK.OutOfTreeSourcePath)security_lite/permission_posix/dac/src
+# Incorrect platform macros used throughout harmony code.
+ActsDacTest.bin: CPPFLAGS += -D__LINUX__
+# See corresponding BUILD.gn
+ActsDacTest.bin: CFLAGS += -Wno-error
+
+ActsDacTest.bin.Sources = $(addprefix security_lite/permission_posix/dac/src/, \
+	ActsDacPreTest.cpp \
+	ActsDacTest.cpp \
+	ActsDacTest.h \
+	ActsSystemDevDacTest.cpp \
+	ActsSystemJffsDacTest.cpp)
+ActsDacTest.bin: LDLIBS += -lgtest -lgtest_main -lpthread -lsec
+$(eval $(call ZMK.Expand,Program.Test,ActsDacTest.bin))
